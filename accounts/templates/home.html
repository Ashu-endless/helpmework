

{% extends 'base.html' %}
 {% load static %}
{% block headload %}
{% comment %} <link rel="icon" type="image/x-icon" href="{% static 'android-chrome-192x192.png' %}"> {% endcomment %}
<link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/djwe9njg4/image/upload/v1638547408/favicon/android-chrome-192x192_guvebm.png">
<link rel="stylesheet" href="{% static 'home.css' %}">
{% endblock headload %}
{% block nav %}
<nav> <a href="{% url 'home' %}" class="home_icon" > <i class="bi bi-house-fill" ></i></a> <input type="text" name="" id="searchhelpmework" autocomplete="off" placeholder="search">  <i id="HMWSearchIcon" class="bi bi-search searchicon"></i> <a class="titlemain"  href="{% url 'home' %}">Help me work</a> 
{% if request.user.is_authenticated %}
<div class="profile_div" ><span class="profile" ></span> <i class="bi bi-caret-down-fill profile_dropdownicon"></i> </div>
{% else %}
<a id="ananymous_user" href="{% url 'home' %}" >login</a>
{% endif %}   </nav>

<div id="searchModal" >
    <i class="bi bi-x-square hidemyprnt"></i>
    <div id="usernhw_search_switcher" > <div class="usernhw_search_switcher_span" ><i class="bi bi-people-fill"></i>Users</div> <div class="usernhw_search_switcher_span" style="color:blueviolet;" > <i class="bi bi-journal-text"></i> Homeworks</div>  </div>
    <div id="UsersearchModalDiv" class="searchModalDiv"></div>
    <div id="HomeworksearchModalDiv" class="searchModalDiv" ></div>
</div>
{% if request.user.is_authenticated %}
<div id="pofile_arrowbox" >
<a href="{% url 'view_profile' request.user %}"  class="arrowboxbtn">
  {{request.user}}
</a>

<div class="arrowboxbtn" id="share_homework">Share</div>
{% comment %} <div class="arrowboxbtn">Edit profile</div>    {% endcomment %}

<form class="arrowboxbtn" action="/logout" method="GET">
<button type="submit" class="logoutbtn"> logout</button></form>

</div>
{% else %}
{% endif %}

<div id="shareModal" >
    <i class="bi bi-x-square hidemyprnt"></i>
    <form class="shareModalDiv" id="shareModalDivpost" action="/share" method="POST" >
     {% csrf_token %}
      <div id="previewing_img" ></div>
      <div id="preview_img_div">
      <div class="preview_img" id="sml_upload_img_div" > <input type="file" accept="image/png, image/gif, image/jpeg" class="" id="" multiple > <i class="bi bi-plus-square-dotted"> <span>Add image</span> </i>   </div>
     </div>
    <div id="about_label" >About</div>
    <div id="about_input"  contenteditable="true" ></div>
    <input type="text" name="homework_about" class="hide" >
    <input type="text" name="homework_images" class="hide">
    <button id="Sharebtn"class="" type="submit" >Share</button>
</form>

    <div id="" class="shareModalDiv" >
    <div class="upload_image_div" > <i class="bi bi-plus-square-dotted"></i>  <input type="file" accept="image/png, image/gif, image/jpeg" class="upload_image" id="" multiple > <span>upload image</span> </div>
    </div>    
</div>

{% comment %} <div id="NSHF" >No such homework found</div>
<div id="NSUF" >No such user found</div> {% endcomment %}
{% endblock nav %}

{% block content %}


<div id="HomeworkHome" >


{% if homework %}
<div class="homework_container" >
<div class="postedby_profile" >
<span class="postedby_profilepic profile" ></span>
<a href="{% url 'view_profile' homework.postedby %}" class="homework_postedby"> {{homework.postedby}}</a>
<span class="homework_posttime" > {{homework.posttime | date:"d M Y f A"}}</span>
</div>
<i class="bi bi-caret-left-fill img-slide-left"></i>
{% if homework.imgsrcs|length == 1 %}
<i class="bi bi-caret-right-fill img-slide-right" style="display:none;"></i>

{% else %}
<i class="bi bi-caret-right-fill img-slide-right" ></i>
{% endif %}
<div class="homework_img_divs">
{% for imgsrc in homework.imgsrcs %}

{% if forloop.counter == 1 %}
<img  src={{ imgsrc }} class="homework_img active_img">
{% else %}
<img  src={{ imgsrc }} class="homework_img unactive_img">
{% endif %}
{% endfor %}
</div>
{% comment %} |slice:"1:-1" {% endcomment %}

<span class="homework_description" > {{homework.description}}</span>


<div class="homework_upvoted_by_div">

{% if request.user in homework.upvoted_by.all %} 

<i class="bi bi-star-fill upvote_btn"></i>
{% else %}
<i class="bi bi-star upvote_btn" ></i>
{% endif %} 



<span class="homework_upvoted_by_count"> {{ homework.upvoted_by.all | length }}</span>
<i class="bi bi-share"  ></i>
<i class="bi bi-file-earmark-arrow-down"></i>


 </div>



<div style="display:none;" >
{% for voters in homework.upvoted_by.all %}
{{voters}}
{% endfor %}
</div>
<span class="homework_no">{{homework.pk}}</span>

</div>
{% else %}



 {% comment %} ????????!!!!!!!!!!!! {% endcomment %}
 {% comment %} ????????!!!!!!!!!!!! {% endcomment %}
 {% comment %} ????????!!!!!!!!!!!! {% endcomment %}

 {% for homework in homeworks %}

<div class="homework_container" >
<div class="postedby_profile" >
<span class="postedby_profilepic profile" ></span>
<a class="homework_postedby" href="{% url 'view_profile' homework.postedby %}" > {{homework.postedby}}</a>
<span class="homework_posttime" > {{homework.posttime | date:"d M Y f A"}}</span>
</div>


<i class="bi bi-caret-left-fill img-slide-left"></i>


{% if homework.imgsrcs|length == 1 %}
<i class="bi bi-caret-right-fill img-slide-right" style="display:none;"></i>

{% else %}
<i class="bi bi-caret-right-fill img-slide-right" ></i>
{% endif %}



<div class="homework_img_divs">
{% comment %} {% if len(homework.imgsrcs) == 1 %}
"true"
{% else %}
{% endif %} {% endcomment %}

{% for imgsrc in homework.imgsrcs %}

{% if forloop.counter == 1 %}
<img  src={{ imgsrc }} class="homework_img active_img">
{% else %}
<img  src={{ imgsrc }} class="homework_img unactive_img">
{% endif %}
{% endfor %}

</div>
{% comment %} |slice:"1:-1" {% endcomment %}

<span class="homework_description" > {{homework.description}}</span>


<div class="homework_upvoted_by_div">

{% if request.user in homework.upvoted_by.all %} 

<i class="bi bi-star-fill upvote_btn"></i>
{% else %}
<i class="bi bi-star upvote_btn" ></i>
{% endif %} 



<span class="homework_upvoted_by_count"> {{ homework.upvoted_by.all | length }}</span>
<i class="bi bi-share" ></i>
<i class="bi bi-file-earmark-arrow-down" ></i>

 </div>



<div style="display:none;" >
{% for voters in homework.upvoted_by.all %}
{{voters}}
{% endfor %}
</div>
<span class="homework_no">{{homework.pk}}</span>

</div>
{% comment %} Container  {% endcomment %}

{% endfor %}


{% endif %}


{% comment %} Container ka container {% endcomment %}
</div>






{% endblock content %}

{% block script %}
<script src="{% static 'home.js' %}" type="module"></script>
<script src="{% static 'message.js' %}" type="module"></script>

{% endblock script %}


